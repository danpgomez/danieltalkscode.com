{"componentChunkName":"component---src-templates-blog-post-js","path":"/the-great-power-of-with/","result":{"data":{"site":{"siteMetadata":{"title":"Daniel Talks Code"}},"markdownRemark":{"id":"c9b6f4ef-a06d-5938-a783-4aec53ddc144","excerpt":"And now weâ€™ve come to the last of the Kotlin scope functions in our journey: . The context object is passed in as an argument to it, but inside theâ€¦","html":"<p>And now weâ€™ve come to the last of the Kotlin scope functions in our journey: <a href=\"https://kotlinlang.org/docs/scope-functions.html#with\"><code class=\"language-text\">with()</code></a>. The context object is passed in as an argument to it, but inside the corresponding lambda you can access it as a receiver using the keyword <code class=\"language-text\">this</code>. Additionally, <code class=\"language-text\">with</code> as it turns out, is not an extension function, and it has two neat uses.</p>\n<p>The first is to use the given object to perform a set of calculations or tasks and return the result. For example, letâ€™s say I had a list of users and wanted to sort the list and then print certain properties from each user. I could do something like this.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">\n<span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">Avenger</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> alias<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> realName<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">val</span> avengers <span class=\"token operator\">=</span> <span class=\"token function\">mutableListOf</span><span class=\"token punctuation\">(</span>\n        <span class=\"token function\">Avenger</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Captain America\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Steve Rogers\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">Avenger</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Black Widow\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Natasha Romanoff\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">Avenger</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Iron Man\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Tony Stark\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">Avenger</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Scarlet Witch\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Wanda Maximoff\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span>\n\n    <span class=\"token function\">with</span><span class=\"token punctuation\">(</span>avengers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">sortBy</span> <span class=\"token punctuation\">{</span> it<span class=\"token punctuation\">.</span>alias <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span> <span class=\"token punctuation\">{</span> <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">it<span class=\"token punctuation\">.</span>alias</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">it<span class=\"token punctuation\">.</span>realName</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Black Widow: Natasha Romanoff</span>\n    <span class=\"token comment\">// Captain America: Steve Rogers</span>\n    <span class=\"token comment\">// Iron Man: Tony Stark</span>\n    <span class=\"token comment\">// Scarlet Witch: Wanda Maximoff</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>A second neat option for using <code class=\"language-text\">with()</code> that is outlined in the <a href=\"https://kotlinlang.org/docs/scope-functions.html#with\">official documentation</a> is create a helper object and use its properties and methods to calculate a value. For my example, Iâ€™ll pretend that there was a tournament between all the Avengers and the first person on the list was the winner. I could write the following.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">\n  <span class=\"token keyword\">val</span> tourneyResults <span class=\"token operator\">=</span> <span class=\"token function\">with</span><span class=\"token punctuation\">(</span>avengers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token string-literal singleline\"><span class=\"token string\">\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\"><span class=\"token function\">first</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>alias</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> won the tournament over </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\"><span class=\"token function\">last</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>alias</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span></span>\n   <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>tourneyResults<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// Black Widow won the tournament over Scarlet Witch</span></code></pre></div>\n<p>I know what youâ€™re thinking, those are some pretty controversial tourney results ðŸ˜†. But regardless, itâ€™s an awesome use case.</p>\n<p>Lastly, this article would not be complete without the following joke.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">\n<span class=\"token keyword\">val</span> greatPower <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"great responsibility\"</span></span>\n<span class=\"token function\">with</span><span class=\"token punctuation\">(</span>greatPower<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"With great power comes </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\"><span class=\"token keyword\">this</span></span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// With great power comes great responsibility</span></code></pre></div>\n<p>Â </p>\n<p><img src=\"https://media.giphy.com/media/hW4pOhW4dK7JI7hFno/giphy.gif\" alt=\"Spiderman\"></p>","frontmatter":{"title":"The great power of .with","date":"March 12, 2021","description":null,"featuredImage":{"src":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAA7AGQDASIAAhEBAxEB/8QAGgAAAwEBAQEAAAAAAAAAAAAAAAEEAgMFBv/EABgBAAMBAQAAAAAAAAAAAAAAAAABAgME/9oADAMBAAIQAxAAAAHxM0Z0yn065qXHocBTDoTnVHBiNieBg6utHC8c8fpueXR4NVsmnNLPVcySSjzw68gjXIxVRzyVN/HgF7whT6Fvhtz6HmMEhhWRiaaAYmDeQGZEwQGzA1oyB//EACEQAAICAgICAwEAAAAAAAAAAAECAAMREhAgIjATFDFB/9oACAEBAAEFAoeBCPTrHSD91EZcxqWExK68xwMTUzU8KIyz6766tF2B8nl2QRmbhh8kNjHkoqw2eVWHRwgO9cexcqoNiIGLhs9C2Z/UtYBmJ4MR1Ea1A11qt3z1yfafae3/xAAfEQADAQACAQUAAAAAAAAAAAAAAQIRAxATISIwMUH/2gAIAQMBAT8BVLSqwmtWjpIT01dcdK2eP8ORVhK9CIQkl0lg6bemke36Es+DDD//xAAcEQACAgIDAAAAAAAAAAAAAAAAAQIREDESITD/2gAIAQIBAT8B4soe6EhlYlFpDbiRqx7HIvLeH35//8QAIhAAAQMDBAMBAAAAAAAAAAAAAQARIQIQMRIgQVEiMEBQ/9oACAEBAAY/AvgCi/knAtjbqaLYQ4WnhQielFPphNkntNpLdqunrfBWb0VjIKLVw7wiaQXMfmf/xAAiEAEAAgICAQQDAAAAAAAAAAABABEhMRBBIDBAUXFhgaH/2gAIAQEAAT8hvHIZieiCUF3DjcLIEhtBrqyW+JsDErlH44E7RLeJTLJgjBKMHDFZuJ1EqlD+x2tP6ialO1xPQMA3X1FXbfAOICCMN6iu6iDsgtWWGrWN9IJpJqz3DJ3v4rsy+kp1MQtTLfnhQDtxKXpDUNEBa/Mi5fF13U+uZ79NmAS4exf/2gAMAwEAAgADAAAAEMcDX2ZgGnwyQk/hpHkW4Ao/iv47vf/EAB0RAQEBAQADAAMAAAAAAAAAAAEAESEQMUFRYXH/2gAIAQMBAT8Q4EN7rkTrGdv3Wlxpy6V8SDkJuQjaPy9IeC9JA/bM0U6/t0P5ttsmCz5Yeb//xAAZEQEBAQEBAQAAAAAAAAAAAAABEQAQITH/2gAIAQIBAT8QYXCcJhFhhGauEvcwCfdanM9Lm8TKfvFupMGl1y3k6uvLrv/EACMQAQACAgEEAgMBAAAAAAAAAAEAESExQRBRYXGRoSCBscH/2gAIAQEAAT8QEkhp6K4EAWmPwSur0wC5g9tYgoYCzFKHmEWW/kqf0ILdPG8SwsqWZ3AKNUVKVxNF8E4nbQtXHtR2Nx63bWozU+0EVq/cV+ymxndQPdBTgldd0FRQzYWNjLgKVqAt7walQ5vCb29mVMia7sAOc1DIiAHzKan/ACNynzDA0Zo2HgvqUzBeL8RU3+DR23pifhs1/cGZP3Fbr7qIUDysUdpYcOYqRSA5S9vmVqsCpYPO7l+VAjW/mJKiRIMuIRzzF8TPMEML0iy2MdXFsq3wahTE6JmDLgwLmILU0iCDdkWlRZmO8ehrobnHRWWvM2PXW5bLe8//2Q=="},"images":{"fallback":{"src":"/static/f1daa5b6662a31e472e822c310abba37/ddf06/avengers-ironman-ryan-yoo.jpg","srcSet":"/static/f1daa5b6662a31e472e822c310abba37/432a4/avengers-ironman-ryan-yoo.jpg 1840w,\n/static/f1daa5b6662a31e472e822c310abba37/556fe/avengers-ironman-ryan-yoo.jpg 3680w,\n/static/f1daa5b6662a31e472e822c310abba37/ddf06/avengers-ironman-ryan-yoo.jpg 7360w","sizes":"(min-width: 7360px) 7360px, 100vw"},"sources":[]},"width":7360,"height":4329}}},"alt":"Photo by Ryan Yoo on Unsplash"}}},"previous":{"fields":{"slug":"/the-usefulness-of-the-let-scope-function/"},"frontmatter":{"title":"The Usefulness of the .let Scope Function"}},"next":{"fields":{"slug":"/software-architecture-vs-design/"},"frontmatter":{"title":"Software Architecture vs Design: Takeaways from my research"}}},"pageContext":{"id":"c9b6f4ef-a06d-5938-a783-4aec53ddc144","previousPostId":"f106a0f2-2ac2-5299-96f1-73cfbca53b85","nextPostId":"0b879fb8-ecb0-5de5-ad7b-65d6856772d7"}},"staticQueryHashes":["2839169884","2841359383"]}