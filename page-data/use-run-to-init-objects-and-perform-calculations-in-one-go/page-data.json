{"componentChunkName":"component---src-templates-blog-post-js","path":"/use-run-to-init-objects-and-perform-calculations-in-one-go/","result":{"data":{"site":{"siteMetadata":{"title":"Daniel Talks Code"}},"markdownRemark":{"id":"33397fc2-76b8-52a9-aa23-9de9586c765f","excerpt":"Continuing our journey through the world of Kotlin Scope Functions we now have , which comes in two delicious flavors: as an extension function on the provided‚Ä¶","html":"<p>Continuing our journey through the world of Kotlin Scope Functions we now have <a href=\"https://kotlinlang.org/docs/scope-functions.html#run\"><code class=\"language-text\">.run</code></a>, which comes in two delicious flavors: as an extension function on the provided object, or as a non-extension function.</p>\n<h2>As an Extension Function</h2>\n<p>This allows us to create an object and use it to compute tasks within the corresponding lambda. You‚Äôre given the context object as a <strong>receiver</strong> (meaning you use the keyword ‚Äúthis‚Äù to access the object and its members) and the returned value is the result of the expressions in the lambda.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">\n<span class=\"token keyword\">class</span> <span class=\"token function\">TimeMachine</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> type<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">var</span> fuel<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">var</span> destinationYear<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">changeFuelType</span><span class=\"token punctuation\">(</span>newFuel<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        fuel <span class=\"token operator\">=</span> newFuel\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">changeDestinationYear</span><span class=\"token punctuation\">(</span>year<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        destinationYear <span class=\"token operator\">=</span> year\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">timeTravel</span><span class=\"token punctuation\">(</span>timeMachine<span class=\"token operator\">:</span> TimeMachine<span class=\"token punctuation\">,</span> traveler<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Traveled to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">timeMachine<span class=\"token punctuation\">.</span>destinationYear</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> on the </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">timeMachine<span class=\"token punctuation\">.</span>type</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> using </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">timeMachine<span class=\"token punctuation\">.</span>fuel</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span></span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">val</span> adventure <span class=\"token operator\">=</span> <span class=\"token function\">TimeMachine</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string-literal singleline\"><span class=\"token string\">\"DeLorean\"</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-literal singleline\"><span class=\"token string\">\"plutonium\"</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token number\">1955</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">changeFuelType</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"‚ö°Ô∏è\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">changeDestinationYear</span><span class=\"token punctuation\">(</span><span class=\"token number\">1985</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">timeTravel</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"Marty McFly\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>adventure<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// Traveled to 1985 on the DeLorean using ‚ö°Ô∏è</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>As a Non-Extension Function</h2>\n<p>You can also use <code class=\"language-text\">.run</code> as a non-extension function to perform several calculations at once and store the result in a variable. Neat and tidy üòé.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\">\n<span class=\"token comment\">// Average age of the cast when making the first film</span>\n\n<span class=\"token keyword\">val</span> averageAge <span class=\"token operator\">=</span> run <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">val</span> cast <span class=\"token operator\">=</span> <span class=\"token function\">mapOf</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string-literal singleline\"><span class=\"token string\">\"Michael J. Fox\"</span></span> <span class=\"token keyword\">to</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-literal singleline\"><span class=\"token string\">\"Lea Thompson\"</span></span> <span class=\"token keyword\">to</span> <span class=\"token number\">24</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-literal singleline\"><span class=\"token string\">\"Christopher Lloyd\"</span></span> <span class=\"token keyword\">to</span> <span class=\"token number\">47</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-literal singleline\"><span class=\"token string\">\"Crispin Glover\"</span></span> <span class=\"token keyword\">to</span> <span class=\"token number\">21</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-literal singleline\"><span class=\"token string\">\"Thomas F. Wilson\"</span></span> <span class=\"token keyword\">to</span> <span class=\"token number\">26</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-literal singleline\"><span class=\"token string\">\"Claudia Wells\"</span></span> <span class=\"token keyword\">to</span> <span class=\"token number\">19</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-literal singleline\"><span class=\"token string\">\"Wendie Jo Sperber\"</span></span> <span class=\"token keyword\">to</span> <span class=\"token number\">27</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span>\n\n    cast<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span><span class=\"token function\">average</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">roundToInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">println</span><span class=\"token punctuation\">(</span>averageAge<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 74.94252873563218%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <iframe class=\"embedly-embed\" src=\"//cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fgiphy.com%2Fembed%2FMP1TAcYZI1JqYR9rJp%2Ftwitter%2Fiframe&amp;display_name=Giphy&amp;url=https%3A%2F%2Fmedia.giphy.com%2Fmedia%2FMP1TAcYZI1JqYR9rJp%2Fgiphy-downsized.gif&amp;image=https%3A%2F%2Fi.giphy.com%2Fmedia%2FMP1TAcYZI1JqYR9rJp%2Fgiphy-downsized-large.gif&amp;key=61d05c9d54e8455ea7a9677c366be814&amp;type=text%2Fhtml&amp;schema=giphy&amp;wmode=opaque\" scrolling=\"no\" title=\"Giphy embed\" frameborder=\"0\" allow=\"autoplay; fullscreen\" allowfullscreen=\"true\" style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe> </div>","frontmatter":{"title":"Use .run to init objects and perform calculations in one go","date":"March 10, 2021","description":null,"featuredImage":{"src":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAA7AGQDASIAAhEBAxEB/8QAGgAAAgMBAQAAAAAAAAAAAAAAAAMBBAUCBv/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAAB0wMICqcZbWsPx+41YoXZmIKCAmAUnLs57qkxo5hd2sR6Dz1t1sRXaZ6OSnnIORQur0V++ZSeJ6pR3NarqdkmHANkAcPjVUmWvX5jJjVGyzUmurE9isYV/8QAIxAAAgICAgICAwEAAAAAAAAAAQIAAxESEyAEIxAiFDAyMf/aAAgBAQABBQLsp+/6bHFafm1weQpFVgD/AJqg1eStjdrH0HkvlcRLNIbsnQkV+twV062N93BYChpWCSy4C17jBE2wqH69PJtw24nJA1c3rnIs3E5DE/nPS+0ZLIINTPXPXPVM1xuPNJ2Xp5FTG3VwpRzONpxmcZmhhQyhdauj/wC/OJiYmIv8/H//xAAbEQEAAgIDAAAAAAAAAAAAAAABABECMSEwQP/aAAgBAwEBPwHoMV1KTiU6jghfh//EABoRAAICAwAAAAAAAAAAAAAAAAECACEwMUD/2gAIAQIBAT8BwmorBtcX/8QAKRAAAQMBBQcFAAAAAAAAAAAAAQACERIgITEyoRAiMEFhcZIzQFGBkf/aAAgBAQAGPwK0/hVFYOU4Ap0XyopKiI4FM7x2YSppA7Kq5SVIdaM4DbCJqKc742drRGIKy6rDVXtWXRXNWVXBCy4YOGqmp0K98fS9Q+Kzu8Vnd+KJd0Q3nRzU9bJI5oCLY9h//8QAJBABAAICAgICAQUAAAAAAAAAAQARITFBUSBhEHGBobHR8PH/2gAIAQEAAT8h8rvWh+kuXL83V9HU/wAqD0+5LY3UVElcjKdWHPnkatdTPtBSDYiMK6HUemivSWVqX3GlSiU0wAsepcvwa7RwVM0cuYm86L5mY0DoJSmAvIRsJkcdwbwfRL8l/sjpuXLly5T4diepACX8KLjwwQh6sq0lxm60C/hfzmRdWrpCiytVDnZO7lApZ9Cf1CXhx+sCUe9qIFb+SX9avAleGc8ygIDE3lT6vBZbqIF3vx2xJREOpTqU6lOoDqHD5//aAAwDAQACAAMAAAAQ37G7KIC/4/L6e8yApaBvyoo/bFe8/8QAGxEAAwEBAAMAAAAAAAAAAAAAAAERECAhMVH/2gAIAQMBAT8Qyl5WsNyjzL6K4Xa16G3lYlzCb//EABoRAQEBAQEBAQAAAAAAAAAAAAEAERAgIVH/2gAIAQIBAT8Q5jZPgTQmDW+hFBz9sstjwtvNhttt5//EACUQAQACAQMEAQUBAAAAAAAAAAEAESExQVEQYXGBkSChscHR8P/aAAgBAQABPxDrcuXNfiYZ7X99DDCxZf0DKq8C1tqIfzf2ZYyB1kUqoXKoBnG+hGICShTESvK2U9pcuLL6mQy1L3iCYAEsq8F7QpUsO8RnvJHreCRABoD4gP3sio/E0EOA0O8DwcF9S/10MX1Sdd9Nb58/mUa3Oxvfi4bUWi8PUUIrjI17k10qNyeCWTvYFq2fRpLXqHBBNHVONdGP9uR1Q8UbbfbrU5lOYiQhlVjj5CXa/OiCgL7o4VR2o/Ym4K7j+wJAB9XHY+VmYaEXOS5WD1Eah3QMqMpJTxIsN9moA36YLa9cw7U+D/M0iClYJ8yw2YCux8wzHAorFKZKzRByoTDilF2vYMFeY71CdgKA+0p1WGAUNVU1Mb+crvMkYQ1h3EncJXpTLKX9zkCL2wGV0YBsIHE7E4yPGnbQ40s6IWhKOJRxP//Z"},"images":{"fallback":{"src":"/static/493d081102f50c0ac516513e9b409898/0c945/back-to-the-future-car-sebastiano-piazzi.jpg","srcSet":"/static/493d081102f50c0ac516513e9b409898/846e0/back-to-the-future-car-sebastiano-piazzi.jpg 1008w,\n/static/493d081102f50c0ac516513e9b409898/bb307/back-to-the-future-car-sebastiano-piazzi.jpg 2016w,\n/static/493d081102f50c0ac516513e9b409898/0c945/back-to-the-future-car-sebastiano-piazzi.jpg 4032w","sizes":"(min-width: 4032px) 4032px, 100vw"},"sources":[]},"width":4032,"height":2372}}},"alt":"Photo by Sebastiano Piazzi on Unsplash"}}},"previous":{"fields":{"slug":"/perform-additional-tasks-with-an-object-using-also/"},"frontmatter":{"title":"Perform additional tasks with an object using .also"}},"next":{"fields":{"slug":"/the-usefulness-of-the-let-scope-function/"},"frontmatter":{"title":"The Usefulness of the .let Scope Function"}}},"pageContext":{"id":"33397fc2-76b8-52a9-aa23-9de9586c765f","previousPostId":"d6e4cdeb-ce78-5a37-b989-d2b9e93aab12","nextPostId":"f106a0f2-2ac2-5299-96f1-73cfbca53b85"}},"staticQueryHashes":["2839169884","2841359383"]}